<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/dom-to-image@2.6.0/dist/dom-to-image.min.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Card Generator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¬</text></svg>">
    <meta name="theme-color" content="#ff0000">
    <meta name="description" content="Create attractive thumbnails for your YouTube videos simply by using the video URL. Customize and share your creations easily.">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap">
    <style>
        :root {
            font-family: "Roboto", sans-serif;
            background-color: rgb(17, 17, 17);
            color: rgb(212, 212, 212);
            --primary-100: #ffdddd;
            --primary-200: #ffc0c0;
            --primary-300: #ff9494;
            --primary-400: #ff5757;
            --primary-500: #ff2323;
            --primary-600: #ff0000;
            --primary-700: #d70000;
            --primary-800: #b10303;
            --primary-900: #920a0a;
            --primary-950: #500000;
        }

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            transition: none 400ms cubic-bezier(0, 0.25, 0.5, 1);
        }

        body {
            font-family: "Roboto", sans-serif;
            background-color: rgb(17, 17, 17);
            color: rgb(212, 212, 212);
        }

        .buymeacoffee {
            position: fixed;
            bottom: 0;
            right: 0;
            margin: 2rem;
            background-color: #ffdd00;
            border: 1px solid #ffdd00;
            border-radius: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .buymeacoffee a {
            display: block;
            background-color: var(--accent-color);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.3rem;
            rotate: 20deg;
            animation: bounce 1s infinite linear;
        }

        .buymeacoffee a:hover {
            animation: shake 2s infinite ease-in-out;
            background-color: var(--accent-color-dark);
        }

        @keyframes shake {
            0%, 100% {
                transform: rotate(0deg);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: rotate(-10deg);
            }
            20%, 40%, 60%, 80% {
                transform: rotate(10deg);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-4px);
            }
            60% {
                transform: translateY(-2px);
            }
        }

        div {
            margin-bottom: 2rem;
        }

        header {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            margin: 2rem;
        }

        header h1 {
            font-size: 2rem;
            font-weight: bold;
        }

        header p {
            font-size: 1.25rem;
            line-height: 1.5;
            max-width: 800px;
        }

        a {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .buymeacoffee {
                display: none;
            }
            header {
                margin: 1rem;
            }
            header p {
                display: none;
            }
        }

        section {
            accent-color: red;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            grid-template-columns: 1fr 400px;
            gap: 1.5rem;
        }

        .design {
            position: relative;
            display: flex;
            flex-direction: column;
            background: repeating-conic-gradient(#131317 0% 25%, #232330 0% 50%);
            background-size: 25px 25px;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            min-width: 40vw;
            min-height: 40vh;
            padding: 1rem;
            width: min-content;
        }

        .design .background {
            position: absolute;
            z-index: -1;
            top: 0%;
            left: 0%;
            right: 0%;
            bottom: 0%;
            border-radius: 0.75rem;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.5;
            filter: blur(2em);
        }

        @media screen and (max-width: 700px) {
            .design {
                padding: 1rem;
                min-width: 90vw;
            }
        }

        .loading {
            animation: loadingEffectOpacity 1.5s ease-in-out infinite;
        }

        @keyframes loadingEffectOpacity {
            0% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.6;
            }
            100% {
                opacity: 0.3;
            }
        }

        .configuration {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .configuration p {
            font-size: 0.875rem;
            line-height: 1.25rem;
            text-align: center;
        }

        .configuration a {
            color: #f0f0f0;
            font-weight: bold;
            text-decoration: none;
        }

        .display-config-button {
            gap: 0.5rem;
        }

        .display-config-button .displaybutton:hover svg {
            animation: scale 0.6s ease infinite alternate;
        }

        @keyframes scale {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(0.8);
            }
        }

        .theme-button, .display-config-button {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-button button, .display-config-button button {
            display: flex;
            padding: 0.3rem 0.8rem;
            background-color: rgb(23, 23, 23);
            color: #f0f0f0;
            border: 1px solid rgb(38, 38, 38);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .theme-button button:hover, .display-config-button button:hover {
            background-color: rgb(44, 44, 44);
        }

        .theme-button button svg, .display-config-button button svg {
            width: 1.3rem;
            height: 1.3rem;
        }

        .activate {
            background-color: rgb(38, 38, 38);
            opacity: 1;
        }

        .light-theme {
            border-left: 0;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-left: 1px solid rgb(38, 38, 38);
        }

        .dark-theme {
            border-right: 0;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .mobile {
            border-left: 0;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-left: 1px solid rgb(38, 38, 38);
        }

        .mobile:hover svg {
            animation: scale 0.6s ease infinite alternate;
        }

        .computer {
            border-right: 0;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .computer:hover svg {
            animation: scale 0.6s ease infinite alternate;
        }

        .light-theme:hover svg {
            animation: sunRotate 3s ease forwards;
        }

        .dark-theme:hover svg {
            animation: moonRotate 3s ease-out forwards;
        }

        @keyframes sunRotate {
            0%, 100% {
                transform: rotate(0deg);
            }
            80% {
                transform: rotate(360deg);
            }
        }

        @keyframes moonRotate {
            0%, 100% {
                opacity: 0.08;
            }
            25% {
                opacity: 1;
                transform: scale(1.1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1);
            }
            75% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        .select {
            background-color: rgb(38, 38, 38);
            opacity: 1;
        }

        .config {
            display: flex;
            flex-direction: column;
            background-color: rgb(29, 29, 29);
            height: fit-content;
            overflow-y: auto;
            border-color: rgb(38, 38, 38);
            border-width: 1px;
            border-radius: 0.75rem;
        }

        .config .config-container {
            display: flex;
            padding: 0.8rem 1rem;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            border-top: 1px solid rgb(229, 229, 229 / 0.1);
        }

        .config .config-container .lenght {
            background-color: rgba(23, 23, 23);
            border: 1px solid rgb(38, 38, 38);
            font-size: 0.7rem;
            border-radius: 0.375rem;
            padding: 2px 5px;
        }

        .config .config-submenu {
            display: flex;
            padding: 0.3rem 1rem 0.8rem 2rem;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .config .config-submenu .lenght {
            background-color: rgba(23, 23, 23);
            border: 1px solid rgb(38, 38, 38);
            font-size: 0.7rem;
            border-radius: 0.375rem;
            padding: 2px 5px;
        }

        .config .button-container {
            display: flex;
            padding: 0.8rem 1rem;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            border-top: 1px solid rgb(229, 229, 229 / 0.1);
        }

        .config .button-container button {
            padding: 0.5rem 1rem;
            background-color: rgb(23, 23, 23);
            color: #f0f0f0;
            border: 1px solid rgb(38, 38, 38);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .config .button-container button:hover {
            background-color: rgb(38, 38, 38);
        }

        .config .button-container button:disabled {
            cursor: not-allowed;
        }

        .config h1 {
            background-color: rgb(23, 23, 23);
            color: rgb(115, 115, 115);
            padding: 0.25rem 1rem;
            margin: 0;
            font-size: 0.875rem;
            line-height: 1.25rem;
            text-align: center;
        }

        .config .input-container {
            background-color: rgb(23, 23, 23);
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            min-height: 32px;
            outline: 2px solid transparent;
            outline-offset: 2px;
            border: 1px solid rgb(229, 229, 229 / 0.1);
            margin: 0.5rem 1rem;
            padding: 6px 0.35rem;
            border-radius: 0.375rem;
        }

        .config .input-container input {
            color: #f0f0f0;
            background-color: transparent;
            border: 0px solid #e5e5e5;
            box-sizing: border-box;
            width: 100%;
            outline: none;
        }

        .config .input-container button {
            display: flex;
            padding: 0.3rem 0.3rem;
            background-color: rgb(23, 23, 23);
            color: #f0f0f0;
            border: 1px solid rgb(38, 38, 38);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .config .input-container button:hover {
            background-color: rgb(44, 44, 44);
        }

        .config .input-container button svg {
            width: 1.3rem;
            height: 1.3rem;
        }

        .config .input-container button:hover svg {
            animation: scale 0.6s ease infinite alternate;
        }

        .config .input-container .activate {
            background-color: rgb(38, 38, 38);
        }

        @media screen and (max-width: 700px) {
            .configuration {
                width: 100%;
                margin: 0 1rem 4rem 1rem;
            }
        }

        .youtube-card {
            transition: all 0.3s;
            max-width: min(100%, 400px);
            background-color: white;
            border-radius: calc(((0.5rem * var(--rounding, 1)) + calc(1rem * var(--spacing, 1))));
            padding: calc(1rem * var(--spacing, 1));
            min-width: min(100%, 350px);
        }

        .youtube-card.loading {
            animation: loadingEffectOpacity 1.5s ease-in-out infinite;
        }

        .youtube-card .navigation {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            width: 100%;
            z-index: 6;
        }

        .youtube-card .navigation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: var(--progress, 50%);
        }

        .youtube-card .thumbnail {
            position: relative;
            border-radius: calc(0.5rem * var(--rounding, 1));
            overflow: hidden;
            aspect-ratio: 16 / 9;
            background-position: center;
            background-size: cover;
        }

        .youtube-card .thumbnail > img {
            width: 100%;
        }

        .youtube-card .thumbnail .duration {
            position: absolute;
            bottom: 0;
            right: 0;
            display: inline-flex;
            padding: 3px 4px;
            border-radius: calc(4px * var(--rounding, 1));
            font-size: 0.75rem;
            margin: 0.5rem;
            font-weight: 500;
        }

        .youtube-card .info {
            flex: auto;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            width: 100%;
        }

        .youtube-card .info .meta {
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-family: 'Roboto', 'Arial', sans-serif;
            font-size: calc(1rem * var(--text-size, 1));
            line-height: calc(1.5rem * var(--text-size, 1));
            font-weight: 400;
            margin: 4px 0 0 0;
        }

        .youtube-card .info .meta span {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .youtube-card .info img {
            height: 45px;
            margin-top: 12px;
            margin-right: 12px;
            border-radius: 50%;
            aspect-ratio: 1 / 1;
        }

        .youtube-card .info h3 {
            font-size: calc(1.17rem * var(--text-size, 1));
            margin: 12px 0 0px 0;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .youtube-card.dark {
            background-color: #0f0f0f;
        }

        .youtube-card.dark .navigation {
            width: 100%;
            background-color: #5e5e5ee8;
        }

        .youtube-card.dark .navigation::before {
            width: var(--progress, 50%);
            background-color: #f00;
        }

        .youtube-card.dark .thumbnail .duration {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .youtube-card.dark .thumbnail .live {
            background-color: rgba(204, 0, 0, 0.85) !important;
            font-weight: 600;
        }

        .youtube-card.dark .info .meta {
            color: #aaa;
        }

        .youtube-card.dark .info h3 {
            color: #f1f1f1;
        }

        .youtube-card.white, .youtube-card.light {
            background-color: white;
        }

        .youtube-card.white .navigation, .youtube-card.light .navigation {
            width: 100%;
            background-color: #5e5e5ee8;
        }

        .youtube-card.white .navigation::before, .youtube-card.light .navigation::before {
            width: var(--progress, 50%);
            background-color: #f00;
        }

        .youtube-card.white .thumbnail .duration, .youtube-card.light .thumbnail .duration {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .youtube-card.white .thumbnail .live, .youtube-card.light .thumbnail .live {
            background-color: rgba(204, 0, 0, 0.85) !important;
            font-weight: 600;
        }

        .youtube-card.white .info .meta, .youtube-card.light .info .meta {
            color: #606060;
        }

        .youtube-card.white .info h3, .youtube-card.light .info h3 {
            color: #0f0f0f;
        }
    </style>
</head>
<body>
    <div>
        <script defer></script>
        <header>
            <h1>YouTube Card Generator</h1>
            <p><em>YouTube Card Generator</em> is a simple tool to generate a YouTube card from a YouTube video URL.</p>
        </header>
        <section>
            <div class="design">
                <div class="background"></div>
                <div class="youtube-card" style="--rounding: 1; --text-size: 1; --spacing: 1;">
                    <div class="thumbnail">
                        <img src="https://via.placeholder.com/400x225" alt="youtube thumbnail">
                        <div class="duration">09:27</div>
                    </div>
                    <div class="info">
                        <img src="https://via.placeholder.com/45" alt="youtube channel logo">
                        <div>
                            <h3>Je quitte mon CDI de Designer</h3>
                            <div class="meta">
                                <span>BastiUi</span>
                                <span>31.2k views â€¢ 2 years ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="configuration">
                <div class="config">
                    <h1>Options de la Carte</h1>
                    <div class="input-container">
                        <input id="videoUrl" placeholder="Coller l'URL de la vidÃ©o YouTube">
                        <button id="fetchVideo">
                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                                <path d="M3 3L21 21" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" stroke-width="1.5" d="M5.49186 4.40607C4.59965 4.92594 4 5.89294 4 7V19C4 20.6569 5.34315 22 7 22H12H17C18.6569 22 20 20.6569 20 19V18.9142L18 16.9142V19C18 19.5523 17.5523 20 17 20H12H7C6.44772 20 6 19.5523 6 19V7C6 6.44772 6.44772 6 7 6H7.08579L5.49186 4.40607ZM8 6.91421V7C8 7.55228 8.44772 8 9 8H9.08579L8 6.91421ZM18 14.0858V7C18 6.44772 17.5523 6 17 6H16V7C16 7.55228 15.5523 8 15 8H11.9142L7.91421 4H8.17071C8.58254 2.83481 9.69378 2 11 2H13C14.3062 2 15.4175 2.83481 15.8293 4H17C18.6569 4 20 5.34315 20 7V16.0858L18 14.0858ZM14 5V6H10V5C10 4.44772 10.4477 4 11 4H13C13.5523 4 14 4.44772 14 5Z" fill="#FFFFFF"/>
                            </svg>
                        </button>
                    </div>
                    <div class="config-container">
                        <span>Style</span>
                        <div class="theme-button">
                            <button class="computer select" id="styleComputer">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none">
                                    <rect x="1" y="1" width="13" height="8" rx="1" fill="#F0F0F0"/>
                                    <rect x="1" y="10" width="12" height="2" rx="1" fill="#727272"/>
                                    <rect x="1" y="13" width="10" height="1" rx="0.5" fill="#727272"/>
                                </svg>
                            </button>
                            <button class="mobile" id="styleMobile">
                                <svg width="18" height="9" viewBox="0 0 18 9" fill="none">
                                    <rect y="2" width="8" height="5" rx="1" fill="#F0F0F0"/>
                                    <rect x="9" y="2" width="9" height="2" rx="1" fill="#727272"/>
                                    <rect x="9" y="5" width="7" height="2" rx="1" fill="#727272"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="config-container">
                        <span>Affichage</span>
                        <div class="display-config-button">
                            <button class="displaybutton" id="displayChannel">
                                <svg width="15px" height="15px" viewBox="0 0 24 24" fill="none">
                                    <path opacity="0.4" d="M12.1207 12.78C12.0507 12.77 11.9607 12.77 11.8807 12.78C10.1207 12.72 8.7207 11.28 8.7207 9.50998C8.7207 7.69998 10.1807 6.22998 12.0007 6.22998C13.8107 6.22998 15.2807 7.69998 15.2807 9.50998C15.2707 11.28 13.8807 12.72 12.1207 12.78Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path opacity="0.34" d="M18.7398 19.3801C16.9598 21.0101 14.5998 22.0001 11.9998 22.0001C9.39977 22.0001 7.03977 21.0101 5.25977 19.3801C5.35977 18.4401 5.95977 17.5201 7.02977 16.8001C9.76977 14.9801 14.2498 14.9801 16.9698 16.8001C18.0398 17.5201 18.6398 18.4401 18.7398 19.3801Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <button class="displaybutton" id="displayMeta">
                                <svg width="15px" height="15px" viewBox="0 0 24 24" fill="none">
                                    <path d="M2 22H22" stroke="#f0f0f0" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9.75 4V22H14.25V4C14.25 2.9 13.8 2 12.45 2H11.55C10.2 2 9.75 2.9 9.75 4Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path opacity="0.4" d="M3 10V22H7V10C7 8.9 6.6 8 5.4 8H4.6C3.4 8 3 8.9 3 10Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path opacity="0.4" d="M17 15V22H21V15C21 13.9 20.6 13 19.4 13H18.6C17.4 13 17 13.9 17 15Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <button class="displaybutton" id="displayDuration">
                                <svg width="15px" height="15px" viewBox="0 0 24 24" fill="none">
                                    <path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path opacity="0.4" d="M15.7099 15.1798L12.6099 13.3298C12.0699 13.0098 11.6299 12.2398 11.6299 11.6098V7.50977" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="config-container">
                        <span>Progression</span>
                        <input type="range" id="progress" value="0" min="0" max="100">
                    </div>
                    <div class="config-container">
                        <span>ThÃ¨me</span>
                        <div class="theme-button">
                            <button class="dark-theme" id="darkTheme">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 24 24" fill="none">
                                    <path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="#f0f0f0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <button class="light-theme select" id="lightTheme">
                                <svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 24 24" fill="none">
                                    <path d="M11 1C11 0.447715 11.4477 0 12 0C12.5523 0 13 0.447715 13 1V3C13 3.55228 12.5523 4 12 4C11.4477 4 11 3.55228 11 3V1Z" fill="#f0f0f0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12ZM8.06167 12C8.06167 14.1751 9.82492 15.9383 12 15.9383C14.1751 15.9383 15.9383 14.1751 15.9383 12C15.9383 9.82492 14.1751 8.06167 12 8.06167C9.82492 8.06167 8.06167 9.82492 8.06167 12Z" fill="#f0f0f0"/>
                                    <path d="M20.4853 3.51472C20.0947 3.12419 19.4616 3.12419 19.0711 3.51472L17.6568 4.92893C17.2663 5.31946 17.2663 5.95262 17.6568 6.34315C18.0474 6.73367 18.6805 6.73367 19.0711 6.34315L20.4853 4.92893C20.8758 4.53841 20.8758 3.90524 20.4853 3.51472Z" fill="#f0f0f0"/>
                                    <path d="M1 13C0.447715 13 0 12.5523 0 12C0 11.4477 0.447715 11 1 11H3C3.55228 11 4 11.4477 4 12C4 12.5523 3.55228 13 3 13H1Z" fill="#f0f0f0"/>
                                    <path d="M3.51472 3.51472C3.1242 3.90524 3.1242 4.53841 3.51472 4.92893L4.92894 6.34315C5.31946 6.73367 5.95263 6.73367 6.34315 6.34315C6.73368 5.95262 6.73368 5.31946 6.34315 4.92893L4.92894 3.51472C4.53841 3.12419 3.90525 3.12419 3.51472 3.51472Z" fill="#f0f0f0"/>
                                    <path d="M11 21C11 20.4477 11.4477 20 12 20C12.5523 20 13 20.4477 13 21V23C13 23.5523 12.5523 24 12 24C11.4477 24 11 23.5523 11 23V21Z" fill="#f0f0f0"/>
                                    <path d="M6.34315 17.6569C5.95263 17.2663 5.31946 17.2663 4.92894 17.6569L3.51473 19.0711C3.1242 19.4616 3.1242 20.0948 3.51473 20.4853C3.90525 20.8758 4.53842 20.8758 4.92894 20.4853L6.34315 19.0711C6.73368 18.6805 6.73368 18.0474 6.34315 17.6569Z" fill="#f0f0f0"/>
                                    <path d="M21 13C20.4477 13 20 12.5523 20 12C20 11.4477 20.4477 11 21 11H23C23.5523 11 24 11.4477 24 12C24 12.5523 23.5523 13 23 13H21Z" fill="#f0f0f0"/>
                                    <path d="M17.6568 17.6569C17.2663 18.0474 17.2663 18.6805 17.6568 19.0711L19.0711 20.4853C19.4616 20.8758 20.0947 20.8758 20.4853 20.4853C20.8758 20.0948 20.8758 19.4616 20.4853 19.0711L19.0711 17.6569C18.6805 17.2663 18.0474 17.2663 17.6568 17.6569Z" fill="#f0f0f0"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="config-container">
                        <span>Taille <span class="lenght" id="sizeValue">x1</span></span>
                        <input type="range" id="size" value="1" min="1" max="4" step="1">
                    </div>
                    <div class="config-container">
                        <span>Options AvancÃ©es</span>
                        <div class="s s--slider" style="font-size:16px">
                            <button role="switch" aria-checked="false" id="advancedOptions">
                            </button>
                        </div>
                    </div>
                    <div class="button-container">
                        <button id="copyButton">Copier</button>
                        <button id="downloadButton">TÃ©lÃ©charger</button>
                    </div>
                </div>
                <p>Project by <a href="https://bento.me/fabienbounoir">@Bouns</a>, source code available on <a href="https://github.com/FabienBounoir/youtube-card">Github</a>.</p>
            </div>
        </section>
    </div>
    <div class="buymeacoffee">
        <a href="https://www.buymeacoffee.com/bouns" target="_blank">
            <svg width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M79.7328 30.193L79.2551 27.7851C78.8245 25.6231 77.851 23.5803 75.6327 22.7994C74.9198 22.5499 74.1128 22.4451 73.5699 21.9281C73.0199 21.4111 72.8606 20.6048 72.734 19.86C72.4988 18.4934 72.2816 17.1267 72.0392 15.7637C71.8329 14.5887 71.67 13.2691 71.1345 12.1953C70.4288 10.7491 68.974 9.90307 67.5301 9.34629C66.789 9.06945 66.0326 8.83527 65.2647 8.64489C61.6459 7.69403 57.8461 7.34333 54.1296 7.14086C49.6667 6.89571 45.192 6.97062 40.7399 7.36502C37.4286 7.6651 33.9365 8.03026 30.7881 9.17275C29.6373 9.59214 28.4503 10.0983 27.5746 10.9841C26.4998 12.076 26.1523 13.768 26.934 15.1274C27.4913 16.0927 28.4358 16.776 29.4382 17.2244C30.741 17.8101 32.1053 18.2512 33.5022 18.5476C37.3924 19.4081 41.4238 19.7443 45.3973 19.8853C49.805 20.0661 54.2164 19.9215 58.6061 19.4587C59.6881 19.3394 60.7701 19.1948 61.8485 19.0285C63.1224 18.8332 63.9402 17.1737 63.5639 16.0132C63.1151 14.6285 61.91 14.0934 60.5457 14.3031C58.8594 14.5706 57.0717 14.6935 55.5445 14.8309C51.2851 15.1202 47.0113 15.1274 42.7483 14.8526C41.3495 14.7601 39.9534 14.6311 38.5613 14.4658C38.2501 14.4296 37.9099 14.3754 37.6277 14.3356C36.7483 14.2055 35.8762 14.0464 35.0076 13.8656C34.6059 13.768 34.6059 13.1967 35.0076 13.0991H35.0257C36.0281 12.8822 37.0414 12.7087 38.0583 12.5677H38.0656C38.5396 12.5351 39.0173 12.452 39.4914 12.3941C43.6093 11.9671 47.7517 11.8222 51.8895 11.9603C54.3286 12.029 56.7641 12.2025 59.1887 12.4809L60.0138 12.593C60.98 12.7376 61.9426 12.9111 62.9016 13.1172C64.3202 13.4245 66.1405 13.5258 66.7738 15.0768C66.9728 15.5721 67.0633 16.118 67.1755 16.635L68.3299 22.0004C68.3543 22.1154 68.3549 22.2343 68.3314 22.3495C68.3079 22.4648 68.2609 22.5739 68.1933 22.6703C68.1258 22.7666 68.0391 22.848 67.9387 22.9094C67.8383 22.9708 67.7263 23.0109 67.6097 23.0272H67.5989C67.465 23.0489 67.3274 23.0633 67.1935 23.0814C61.5012 23.807 55.7678 24.1632 50.0294 24.148C44.3435 24.1421 38.6638 23.775 33.0245 23.0489C32.5179 22.9874 31.9642 22.897 31.5155 22.8319C30.3357 22.6584 29.1668 22.4415 27.9943 22.2498C26.5721 22.0148 25.2151 22.1341 23.9304 22.8319C22.8809 23.4104 22.0233 24.2926 21.4877 25.3664C20.9304 26.5088 20.7675 27.7526 20.5214 28.9818C20.2717 30.2111 19.8845 31.5379 20.0329 32.7997C20.3477 35.5222 22.2512 37.7348 24.9907 38.2301C38.5377 40.6455 52.3618 41.1033 66.0391 39.5896C66.299 39.56 66.5622 39.5891 66.8093 39.6747C67.0564 39.7603 67.2811 39.9002 67.4669 40.084C67.6527 40.2679 67.7948 40.4911 67.8828 40.7372C67.9708 40.9832 68.0023 41.2459 67.9752 41.5057L67.7183 44.0257L64.0343 79.844C63.8859 81.3263 63.8642 82.8521 63.582 84.3163C63.1405 86.6194 61.5807 88.033 59.3045 88.55C57.2164 89.0236 55.0885 89.2731 52.9498 89.2912C50.5759 89.3057 48.2091 89.2008 45.8352 89.2116C43.3056 89.2261 40.2043 88.9947 38.2537 87.1147C36.5348 85.4588 36.2996 82.8701 36.0643 80.6322L33.419 55.277L32.2537 44.0908C32.1198 42.8218 31.2187 41.5781 29.8001 41.6395C28.5842 41.6938 27.2018 42.7242 27.3466 44.0944L28.1717 51.9942L31.6059 84.9382C32.1379 89.7974 35.8544 92.4149 40.4576 93.1525C43.1428 93.5864 45.8967 93.6731 48.6253 93.7165C52.1211 93.7744 55.6531 93.9081 59.091 93.2754C64.1863 92.3426 68.0114 88.9441 68.5578 83.6692C69.7883 71.6225 71.0295 59.5794 72.2635 47.5327L73.0416 39.9873C73.0799 39.6131 73.2379 39.2612 73.4921 38.9838C73.7463 38.7064 74.0832 38.5182 74.4529 38.4471C75.9077 38.1651 77.3009 37.6806 78.3396 36.5743C79.9861 34.8099 80.3154 32.5141 79.7328 30.193ZM74.3842 32.9841C73.8594 33.4794 73.0705 33.7108 72.2925 33.8265C63.5494 35.1245 54.6832 35.7789 45.846 35.4896C39.5203 35.2727 33.2634 34.5713 27.0028 33.6891C26.3876 33.6024 25.7253 33.4903 25.3019 33.0384C24.5058 32.1851 24.9002 30.4714 25.1065 29.441C25.2947 28.501 25.6566 27.2392 26.782 27.1054C28.5335 26.8993 30.5673 27.6405 32.3044 27.9008C34.3924 28.219 36.4877 28.4757 38.5903 28.6673C47.565 29.4844 56.6917 29.3542 65.6302 28.1611C67.2587 27.9442 68.8835 27.6911 70.4975 27.4019C71.9415 27.1416 73.5374 26.6571 74.4059 28.1466C75.0066 29.1626 75.0862 30.522 74.9921 31.6681C74.9636 32.1686 74.7448 32.6394 74.3805 32.9841H74.3842ZM52.0958 47.0844C48.9763 48.4221 45.4371 49.9334 40.8448 49.9334C38.9254 49.9287 37.0155 49.6648 35.1669 49.1488L38.3406 81.7024C38.5758 84.5224 40.9353 86.6917 43.7688 86.6917C43.7688 86.6917 48.267 86.9267 49.7689 86.9267C51.3865 86.9267 56.2321 86.6917 56.2321 86.6917C59.0656 86.6917 61.4215 84.5224 61.6567 81.7024L65.0584 45.7286C63.5238 45.1741 61.9062 44.8832 60.2743 44.8681C57.2852 44.8681 54.8787 45.8949 52.0958 47.0844Z" fill="#0D0C22"/>
                            </svg>
                        </button>
                    </div>
                    <div class="button-container">
                        <button id="copyButton">Copier</button>
                        <button id="downloadButton">TÃ©lÃ©charger</button>
                    </div>
                </div>
                <p>Project by <a href="https://bento.me/fabienbounoir">@Bouns</a>, source code available on <a href="https://github.com/FabienBounoir/youtube-card">Github</a>.</p>
            </div>
        </section>
    </div>
    <script>
        const API_KEY = process.env.YT_API_KEY;
        let config = {
            style: 'computer',
            displayChannel: false,
            displayMeta: true,
            displayDuration: true,
            theme: 'light',
            size: 1,
            rounding: 1,
            textSize: 1,
            spacing: 1,
            autoPaste: false,
            advanced: false
        };

        let data = {
            thumbnail: 'https://via.placeholder.com/400x225',
            channelLogo: 'https://via.placeholder.com/45',
            title: 'Je quitte mon CDI de Designer',
            channel: 'BastiUi',
            views: '31.2k',
            time: '2 years ago',
            duration: '09:27'
        };

        document.getElementById('fetchVideo').addEventListener('click', async function() {
            const videoUrl = document.getElementById('videoUrl').value;
            const videoId = extractVideoId(videoUrl);
            if (videoId) {
                try {
                    const videoData = await fetchVideoData(videoId);
                    updateCard(videoData);
                } catch (error) {
                    console.error('Error fetching video data:', error);
                }
            } else {
                alert('Please enter a valid YouTube URL');
            }
        });

        document.getElementById('styleComputer').addEventListener('click', function() {
            config.style = 'computer';
            updateCardDisplay();
        });

        document.getElementById('styleMobile').addEventListener('click', function() {
            config.style = 'mobile';
            updateCardDisplay();
        });

        document.getElementById('displayChannel').addEventListener('click', function() {
            config.displayChannel = !config.displayChannel;
            updateCardDisplay();
        });

        document.getElementById('displayMeta').addEventListener('click', function() {
            config.displayMeta = !config.displayMeta;
            updateCardDisplay();
        });

        document.getElementById('displayDuration').addEventListener('click', function() {
            config.displayDuration = !config.displayDuration;
            updateCardDisplay();
        });

        document.getElementById('darkTheme').addEventListener('click', function() {
            config.theme = 'dark';
            updateCardDisplay();
        });

        document.getElementById('lightTheme').addEventListener('click', function() {
            config.theme = 'light';
            updateCardDisplay();
        });

        document.getElementById('size').addEventListener('input', function() {
            config.size = parseInt(this.value);
            document.getElementById('sizeValue').textContent = `x${config.size}`;
            updateCardDisplay();
        });

        document.getElementById('progress').addEventListener('input', function() {
            config.progress = parseInt(this.value);
            updateCardDisplay();
        });

        document.getElementById('advancedOptions').addEventListener('click', function() {
            config.advanced = !config.advanced;
            updateCardDisplay();
        });

        document.getElementById('copyButton').addEventListener('click', function() {
            copyToClipboard();
        });

        document.getElementById('downloadButton').addEventListener('click', function() {
            downloadImage();
        });

        function extractVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        async function fetchVideoData(videoId) {
        const resp = await fetch(`/api/fetchVideo?videoId=${videoId}`);
        if (!resp.ok) {
            throw new Error('Erreur lors de la rÃ©cupÃ©ration des donnÃ©es YouTube');
        }
        const { video, channel } = await resp.json();

        return {
            thumbnail: video.snippet.thumbnails.maxres?.url || video.snippet.thumbnails.high.url,
            channelLogo: channel.snippet.thumbnails.default.url,
            title: video.snippet.title,
            channel: channel.snippet.title,
            views: formatViews(video.statistics.viewCount),
            time: new Date(video.snippet.publishedAt).toLocaleDateString(),
            duration: formatDuration(video.contentDetails.duration)
        };
        }


        function formatViews(views) {
            if (views >= 1000000) {
                return (views / 1000000).toFixed(1) + 'M';
            } else if (views >= 1000) {
                return (views / 1000).toFixed(1) + 'k';
            } else {
                return views;
            }
        }

        function formatDuration(duration) {
            const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
            const hours = (parseInt(match[1]) || 0);
            const minutes = (parseInt(match[2]) || 0);
            const seconds = (parseInt(match[3]) || 0);
            return `${hours ? hours + ':' : ''}${minutes < 10 ? '0' + minutes : minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        }

        function updateCard(videoData) {
            data = { ...data, ...videoData };
            updateCardDisplay();
        }

        function updateCardDisplay() {
            const youtubeCard = document.querySelector('.youtube-card');
            const thumbnail = document.querySelector('.thumbnail img');
            const durationElement = document.querySelector('.duration');
            const infoImg = document.querySelector('.info img');
            const titleElement = document.querySelector('.info h3');
            const meta = document.querySelector('.meta');
            const channelElement = meta.querySelector('span:first-child');
            const viewsTimeElement = meta.querySelector('span:last-child');

            youtubeCard.className = `youtube-card ${config.theme}`;
            youtubeCard.style.setProperty('--rounding', config.rounding);
            youtubeCard.style.setProperty('--text-size', config.textSize);
            youtubeCard.style.setProperty('--spacing', config.spacing);

            thumbnail.src = data.thumbnail;
            durationElement.textContent = data.duration;
            infoImg.src = data.channelLogo;
            titleElement.textContent = data.title;
            channelElement.textContent = data.channel;
            viewsTimeElement.textContent = `${data.views} â€¢ ${data.time}`;

            if (config.displayChannel) {
                infoImg.style.display = 'block';
                channelElement.style.display = 'block';
            } else {
                infoImg.style.display = 'none';
                channelElement.style.display = 'none';
            }

            if (config.displayMeta) {
                meta.style.display = 'flex';
            } else {
                meta.style.display = 'none';
            }

            if (config.displayDuration) {
                durationElement.style.display = 'inline-flex';
            } else {
                durationElement.style.display = 'none';
            }
        }

        function copyToClipboard() {
            const card = document.querySelector('.youtube-card');
            domtoimage.toPng(card)
                .then(function (dataUrl) {
                    const img = new Image();
                    img.src = dataUrl;
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0);
                        canvas.toBlob(function(blob) {
                            navigator.clipboard.write([
                                new ClipboardItem({
                                    'image/png': blob
                                })
                            ]);
                        });
                    };
                })
                .catch(function (error) {
                    console.error('Error copying to clipboard:', error);
                });
        }

        function downloadImage() {
            const card = document.querySelector('.youtube-card');
            domtoimage.toPng(card)
                .then(function (dataUrl) {
                    const link = document.createElement('a');
                    link.download = 'youtube-card.png';
                    link.href = dataUrl;
                    link.click();
                })
                .catch(function (error) {
                    console.error('Error downloading image:', error);
                });
        }
    </script>
</body>
</html>